# Лабораторная работа №1

## Тема:
> Управление данными в информационных системах: от онтологий и
> метаданных до обработки с помощью XQuery

## Цель:
> Изучение теоретических основ и получение практических навыков
> управления данными в информационных системах, включая
> создание онтологий и метаданных, трансформацию и
> визуализацию данных, а также обработку информации с помощью
> технологии XQuery.


## Задание на лабораторную работу:

### Часть 1

1. Создать информационную модель и онтологию информационной
   системы торгового предприятия (специализацию предприятия выбрать в
   соответствии с вариантом из табл.3.2). Обязательно отразить в модели
   ассортимент товаров / услуг, список клиентов, сделки предприятия.
2. Составить по созданной информационной модели документы XML.
3. Описать структуру составленных документов средствами DTD и XML
   Schema.


### Часть 2

1. Преобразовать документы, созданные в части 1
   средствами XSLT:
    1. преобразовать документ XML в документ HTML;
    2. преобразовать документ XML в другой документ XML:
   переименовать элементы и атрибуты; трансформировать документ так, чтобы
   атрибуты стали элементами; дополнить сложные элементы исходного документа
   элементами, содержащими число элементов-потомков; оставить в документе
   только некоторые узлы по ключу; выбрать узел по порядку следования в
   документе; отсортировать данные документа.


## Часть 3

1. Написать скрипты на языке XQuery, осуществляющие HTML-
   визуализацию документов XML, созданных в части 1.


## Информационная модель, онтология, XML-документы, DTD и XML Schema

### Информационная модель и онтология

> Информационная модель для сети магазинов компьютерной техники включает:

   - Ассортимент товаров: Продукты, такие как ноутбуки, настольные компьютеры, мониторы и периферийные устройства, 
     с атрибутами:  идентификатор, название, цена, количество на складе и категория.

   - Клиенты: Покупатели с данными, такими как идентификатор, имя, контактная информация и история покупок.

   - Сделки: Записи о продажах, связывающие клиентов с приобретенными товарами, включая идентификатор сделки, дату и общую сумму.

> Фрагмент глоссария:

```
Термин	Определение
Продукт	Товар, продаваемый в магазине, например, ноутбук, компьютер, монитор.
Ноутбук	Тип продукта, характеризуемый брендом, ценой и характеристиками.
Клиент	Покупатель, приобретающий товары, с контактными данными и историей покупок.
Сделка	Запись о продаже, связывающая клиента с приобретенными товарами.
```
 
> Дерево классификации (фрагмент):

```
Продукты
├── Ноутбуки
├── Настольные компьютеры
├── Мониторы
└── Периферия
    ├── Клавиатуры
    └── Мыши
Клиенты
├── Физические лица
└── Юридические лица
Сделки
```

> Диаграмма отношений:
   - Клиент (ID, Имя, Email) → Сделка (ID, Дата, Сумма)
   - Сделка → Продукт (ID, Название, Цена, Категория)

> XML-документ

> main.xml



> Описание DTD

> Определяем структуру XML-документа с помощью DTD.

> main_dtd.xml


> Описание XML Schema

> main_schema.xml

### Преобразование XML с помощью XSLT

> Создаем XSLT-таблицу стилей для преобразования XML в HTML-таблицу, отображающую информацию о продуктах.

> main_xslt.xml 

> Связываем XML-документ с этой таблицей стилей, добавив в начало XML:

```
<?xml-stylesheet type="text/xsl" href="main.xsl"?>
```

### Преобразование XML в другой XML

> Создаем XSLT для выполнения следующих задач:
   - Переименование элементов и атрибутов.
   - Преобразование атрибутов в элементы.
   - Добавление элементов с количеством потомков.
   - Фильтрация узлов по ключу (например, только ноутбуки).
   - Выбор узла по порядку.
   - Сортировка данных.

> Результат:
   - Элемент store переименован в computerStore, products в items, product в item.
   - Атрибут id стал элементом itemId, атрибут category стал элементом categoryElement.
   - Добавлен элемент childCount с количеством дочерних элементов (3 для каждого product).
   - Включены только продукты категории «Laptop» (в данном случае только Lenovo ThinkPad X1).
   - Выбран второй продукт (Dell OptiPlex 7070) и скопирован в secondProduct.
   - Продукты отсортированы по цене в порядке убывания (хотя в примере только один ноутбук).

### Визуализация с помощью XQuery

> Создаем XQuery-скрипт для HTML-визуализации XML-документа в виде таблицы.

```
main.xquery
```

### Ответы на контрольные вопросы
1. Основные функции информационных систем: Хранение, передача и трансформация информации.

2. Данные и знания: Данные — это необработанная информация (факты, числа), знания — интерпретированные данные, выражающие смысл и связи.

3. Связь таксономии и онтологии: Таксономия — иерархическая классификация объектов, онтология включает таксономию, а также определения и правила вывода.

4. Назначение OWL: Язык для описания онтологий в семантическом вебе, позволяющий задавать классы, свойства и отношения.

5. Конструкции DTD: ELEMENT (элементы), ATTLIST (атрибуты), ENTITY (сущности), NOTATION (нотации), PCDATA, CDATA.

6. Описание в XML Schema: Элемент — <xs:element>, атрибут — <xs:attribute>, новый тип — <xs:simpleType> или <xs:complexType>.

7. Путь адресации XPath: Выражение для выбора узлов в XML-документе, состоящее из шагов (ось, запись узла, предикат).

8. Причины и категории трансформации XML: Причины — адаптация данных, визуализация, фильтрация; категории — XML-to-XML, XML-to-HTML, XML-to-Text.

9. Процессор XSLT и типы преобразований: Процессор проходит по дереву XML, применяя шаблоны; типы: XML-to-XML, XML-to-HTML, XML-to-Text.

10. Создание элементов и атрибутов в XSLT: <xsl:element name="name"> для элементов, <xsl:attribute name="name"> для атрибутов.

11. Копирование в XSLT: <xsl:copy> копирует текущий узел, <xsl:copy-of> копирует указанный узел с потомками.

12. Конструирование XML в XQuery: Используются конструкторы элементов, аналогичные XML, с выражениями в {}.

13. FLWOR-выражение: Составное выражение (for, let, where, order by, return) для обработки последовательностей; объединение — через вложенные for или where.

14. Сравнение последовательностей в XQuery: Функция deep-equal() для позлементного сравнения.

15. Сортировка и группировка в XQuery: Сортировка — order by в FLWOR, группировка — с помощью let для подсчета или агрегации.